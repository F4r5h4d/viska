(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{11:function(t,e){t.exports.forEachSync=function(t,e){return new Promise((function(i,o){var a=0;!function n(s){if(s>=t.length)return i(t);var r=e(t[s],s);return a+=1,r instanceof Promise&&r.then((function(){return n(a)})).catch(o),n(a)}(0)}))},t.exports.minifyStr=function(t,e){return t.length<=e?t:"".concat(t.substr(0,Math.ceil(e/2))).concat(t.substr(t.length-Math.floor(e/2)))},t.exports.strToNumber=function(t,e){for(var i=1,o=0;o<t.length;o++)i=Math.imul(i,t.charCodeAt(o));var a=(Math.cos(i)+1)/2,n=Math.floor(a*e)-1;return n<0&&n++,n>=e&&(n=e-1),Math.floor(a*e)},t.exports.copyToClipboard=function(t){var e=document.createElement("input");return e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.value=t,e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),setTimeout((function(){e.remove()})),!0}},65:function(t,e){t.exports=function(t){return t&&/^[\u0600-\u06FF]+$/.test(t.substr(0,1))?"rtl":"ltr"}},7:function(t,e,i){"use strict";i.r(e);var o=i(2),a=i(11),n={props:{color:{type:String,default:"default"},loading:{type:Boolean,default:!1},fab:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1}},style:function(t){var e=t.className;t.mediaQuery;return[e("button",{display:"inline-block",borderRadius:"8px",border:"solid 1px ".concat(this.$root.theme.borderColor),textAlign:"center",cursor:"pointer",width:"auto","&:focus":{outline:"none",textDecoration:"underline"},"&.full-width":{width:"100%"},"&.primary":{background:this.$root.theme.primaryColor,borderColor:this.$root.theme.primaryColor,color:"#fff"},"&.danger":{background:this.$root.theme.dangerColor,color:"#fff"},"&.transparent":{background:"transparent",color:"inherit",border:"none"},"&.default":{background:this.$root.theme.backgroundColor,color:"inherit"},"&[disabled]":{cursor:"not-allowed",opacity:.6}})]}},s=i(9),r=Object(s.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("button",{class:[this.$style.button,this.color,this.fullWidth&&"full-width",this.fab&&"fab"]},[this.loading?e("div",[e("i",{staticClass:"fa fa-spinner fa-pulse"})]):this._t("default")],2)}),[],!1,null,null,null).exports,l={props:{name:{type:String,default:""},size:{type:Number,default:64}},methods:{applyStyle:function(){var t,e=this,i=this.$el,o=(t={},["head","necks","face-color","neck-top-color","neck-bottom-color","lip","eye-left","eye-left-circles","eye-left-circle","eye-right","eye-right-circles","eye-right-circle","antens"].forEach((function(e){t[e]=i.getElementById(e),t[e].style.transformOrigin="center",t[e].style.transitionDuration="0.4s",t[e].style.transitionProperty="fill, transform",t[e].style.willChange="fill, transform"})),t),n=function(t,i,o){return Object(a.strToNumber)(Object(a.minifyStr)(e.name,10)+o,Math.abs(t-i)+1)-Math.abs(t)};if(i.style.width=this.size+"px",i.style.height=this.size+"px",!this.name)return Object.keys(o).forEach((function(t){o[t].style.transform=null,o[t].style.fill=null}));var s=n(-13,13,"F$@^G");o.head.style.transform="rotate(".concat(s,"deg)"),o.necks.style.transform="rotate(".concat(Math.ceil(s/3),"deg)"),o.lip.style.transform="translateY(".concat(n(-8,0,"VS#f"),"%)"),o.antens.style.transform="translateY(".concat(n(0,13,":A$FK"),"%)"),o["eye-left"].style.transform="translateY(".concat(n(-2,5,"*&IAX"),"%)"),o["eye-right"].style.transform="translateY(".concat(n(-2,5,"R@$(F"),"%)"),o["eye-left-circles"].style.transform="translateX(".concat(n(-7,5,"<IHT"),"%)"),o["eye-right-circles"].style.transform="translateX(".concat(n(-7,5,"ZXDQ"),"%)"),o["eye-left-circle"].style.fill="hsl(".concat(4*n(20,90,"#0F"),", 10%, 50%)"),o["eye-right-circle"].style.fill=o["eye-left-circle"].style.fill,o["face-color"].style.fill="hsl(".concat(7*n(1,35,"VG3Z"),", 40%, 70%)"),o["neck-top-color"].style.fill=o["face-color"].style.fill,o["neck-bottom-color"].style.fill=o["face-color"].style.fill}},mounted:function(){var t=this;this.$nextTick((function(){t.applyStyle()}))},watch:{name:function(){this.applyStyle()},size:function(){this.applyStyle()}},style:function(t){var e=t.className;t.mediaQuery;return[e("avatar",{display:"inline-block",position:"relative"})]}},c={components:{Avatar:Object(s.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"1024px",height:"1024px",viewBox:"0 0 1024 1024","enable-background":"new 0 0 1024 1024","xml:space":"preserve"}},[i("g",{attrs:{id:"necks"}},[i("rect",{attrs:{id:"neck-center",x:"473",y:"683",fill:"#777777",width:"78",height:"329"}}),t._v(" "),i("g",{attrs:{id:"neck-top"}},[i("path",{attrs:{id:"neck-top-color",fill:"#B9B9B9",d:"M593.331,837.247C591.609,848.111,581.2,857,570.2,857H453.8c-11,0-21.409-8.889-23.131-19.753\n\t\t\tl-17.198-108.493C411.749,717.889,419.34,709,430.34,709h163.32c11,0,18.591,8.889,16.869,19.753L593.331,837.247z"}})]),t._v(" "),i("g",{attrs:{id:"neck-bottom"}},[i("path",{attrs:{id:"neck-bottom-color",fill:"#B9B9B9",d:"M590,1120c0,11-9,20-20,20H454c-11,0-20-9-20-20V958c0-11,9-20,20-20h116c11,0,20,9,20,20V1120z"}})])]),t._v(" "),i("g",{attrs:{id:"head"}},[i("g",{attrs:{id:"antens"}},[i("g",{attrs:{id:"anten-right"}},[i("path",{attrs:{fill:"#777777",d:"M398.304,339.808c1.881,5.168-0.808,10.936-5.977,12.817l-10.384,3.779\n\t\t\t\tc-5.168,1.881-10.936-0.808-12.817-5.977L262.296,56.915c-1.881-5.168,0.808-10.936,5.977-12.817l10.384-3.779\n\t\t\t\tc5.168-1.881,10.936,0.808,12.817,5.977L398.304,339.808z"}})]),t._v(" "),i("g",{attrs:{id:"anten-left"}},[i("path",{attrs:{fill:"#777777",d:"M625.696,339.808c-1.881,5.168,0.808,10.936,5.977,12.817l10.384,3.779\n\t\t\t\tc5.168,1.881,10.936-0.808,12.817-5.977l106.83-293.513c1.881-5.168-0.808-10.936-5.977-12.817l-10.384-3.779\n\t\t\t\tc-5.168-1.881-10.936,0.808-12.817,5.977L625.696,339.808z"}})])]),t._v(" "),i("g",{attrs:{id:"face"}},[i("g",{attrs:{id:"face-main"}},[i("g",{attrs:{opacity:"0.1"}},[i("path",{attrs:{d:"M851,698c0,49.706-40.294,90-90,90H259c-49.706,0-90-40.294-90-90V395c0-49.706,40.294-90,90-90h502\n\t\t\t\t\tc49.706,0,90,40.294,90,90V698z"}})]),t._v(" "),i("g",[i("path",{attrs:{id:"face-color",fill:"#B9B9B9",d:"M851,678c0,49.706-40.294,90-90,90H259c-49.706,0-90-40.294-90-90V375c0-49.706,40.294-90,90-90h502\n\t\t\t\t\tc49.706,0,90,40.294,90,90V678z"}})])]),t._v(" "),i("g",{attrs:{id:"rails"}},[i("g",{attrs:{id:"rail-left"}},[i("g",{attrs:{opacity:"0.1"}},[i("path",{attrs:{d:"M297,645c0,8.284-6.716,15-15,15h-1c-8.284,0-15-6.716-15-15V361c0-8.284,6.716-15,15-15h1c8.284,0,15,6.716,15,15V645\n\t\t\t\t\t\tz"}})]),t._v(" "),i("g",[i("path",{attrs:{fill:"#777777",d:"M297,635c0,8.284-6.716,15-15,15h-1c-8.284,0-15-6.716-15-15V351c0-8.284,6.716-15,15-15h1\n\t\t\t\t\t\tc8.284,0,15,6.716,15,15V635z"}})])]),t._v(" "),i("g",{attrs:{id:"rail-center"}},[i("g",{attrs:{opacity:"0.1"}},[i("path",{attrs:{d:"M527,696c0,8.284-6.716,15-15,15h-1c-8.284,0-15-6.716-15-15V518c0-8.284,6.716-15,15-15h1c8.284,0,15,6.716,15,15V696\n\t\t\t\t\t\tz"}})]),t._v(" "),i("g",[i("path",{attrs:{fill:"#777777",d:"M527,686c0,8.284-6.716,15-15,15h-1c-8.284,0-15-6.716-15-15V508c0-8.284,6.716-15,15-15h1\n\t\t\t\t\t\tc8.284,0,15,6.716,15,15V686z"}})])]),t._v(" "),i("g",{attrs:{id:"rail-right"}},[i("g",{attrs:{opacity:"0.1"}},[i("path",{attrs:{d:"M757,645c0,8.284-6.716,15-15,15h-1c-8.284,0-15-6.716-15-15V361c0-8.284,6.716-15,15-15h1c8.284,0,15,6.716,15,15V645\n\t\t\t\t\t\tz"}})]),t._v(" "),i("g",[i("path",{attrs:{fill:"#777777",d:"M757,635c0,8.284-6.716,15-15,15h-1c-8.284,0-15-6.716-15-15V351c0-8.284,6.716-15,15-15h1\n\t\t\t\t\t\tc8.284,0,15,6.716,15,15V635z"}})])])])]),t._v(" "),i("g",{attrs:{id:"lip"}},[i("g",[i("g",{attrs:{opacity:"0.1"}},[i("path",{attrs:{d:"M567,665c0,11.046-8.954,20-20,20h-70c-11.046,0-20-8.954-20-20v-34c0-11.046,8.954-20,20-20h70\n\t\t\t\t\tc11.046,0,20,8.954,20,20V665z"}})]),t._v(" "),i("g",[i("path",{attrs:{fill:"#E9E9E9",d:"M567,655c0,11.046-8.954,20-20,20h-70c-11.046,0-20-8.954-20-20v-34c0-11.046,8.954-20,20-20h70\n\t\t\t\t\tc11.046,0,20,8.954,20,20V655z"}})])])]),t._v(" "),i("g",{attrs:{id:"eyes"}},[i("g",{attrs:{id:"eye-left"}},[i("g",{attrs:{id:"eye-left-main"}},[i("g",{attrs:{opacity:"0.1"}},[i("path",{attrs:{d:"M421,549c0,16.569-13.431,30-30,30H146c-16.569,0-30-13.431-30-30V438c0-16.569,13.431-30,30-30h245\n\t\t\t\t\t\tc16.569,0,30,13.431,30,30V549z"}})]),t._v(" "),i("g",[i("path",{attrs:{fill:"#E9E9E9",d:"M421,529c0,16.569-13.431,30-30,30H146c-16.569,0-30-13.431-30-30V418c0-16.569,13.431-30,30-30h245\n\t\t\t\t\t\tc16.569,0,30,13.431,30,30V529z"}})])]),t._v(" "),i("g",{attrs:{id:"eye-left-circles"}},[i("circle",{attrs:{id:"eye-left-circle",fill:"#777777",cx:"282",cy:"473.212",r:"63.25"}}),t._v(" "),i("g",{attrs:{id:"eye-left-circle-middle"}},[i("g",{attrs:{opacity:"0.1"}},[i("circle",{attrs:{cx:"282",cy:"483.212",r:"30.36"}})]),t._v(" "),i("g",[i("circle",{attrs:{id:"eye-left-circle-color",fill:"#E5E5E5",cx:"282",cy:"473.212",r:"30.36"}})])])])]),t._v(" "),i("g",{attrs:{id:"eye-right"}},[i("g",{attrs:{id:"eye-right-main"}},[i("g",{attrs:{opacity:"0.1"}},[i("path",{attrs:{d:"M908,438c0-16.569-13.431-30-30-30H633c-16.569,0-30,13.431-30,30v111c0,16.569,13.431,30,30,30h245\n\t\t\t\t\t\tc16.569,0,30-13.431,30-30V438z"}})]),t._v(" "),i("g",[i("path",{attrs:{fill:"#E9E9E9",d:"M908,418c0-16.569-13.431-30-30-30H633c-16.569,0-30,13.431-30,30v111c0,16.569,13.431,30,30,30h245\n\t\t\t\t\t\tc16.569,0,30-13.431,30-30V418z"}})])]),t._v(" "),i("g",{attrs:{id:"eye-right-circles"}},[i("circle",{attrs:{id:"eye-right-circle",fill:"#777777",cx:"742",cy:"473.212",r:"63.25"}}),t._v(" "),i("g",{attrs:{id:"eye-right-circle-middle"}},[i("g",{attrs:{opacity:"0.1"}},[i("circle",{attrs:{cx:"742",cy:"483.212",r:"30.36"}})]),t._v(" "),i("g",[i("circle",{attrs:{id:"eye-right-circle-color",fill:"#E5E5E5",cx:"742",cy:"473.212",r:"30.36"}})])])])])])])])}),[],!1,null,null,null).exports},props:{user:{type:Object},showName:{type:Boolean,default:!0},multiLine:{type:Boolean,default:!1},avatarSize:{type:Number,default:64},playMode:{type:Boolean,default:!1}},data:function(){return{playModeName:""}},methods:{randomizeLoop:function(){var t=this;this.playMode?(this.playModeName=(3e3*Math.random()).toString(),setTimeout((function(){t.randomizeLoop()}),500)):this.playModeName=""}},created:function(){this.randomizeLoop()},watch:{playMode:function(){this.randomizeLoop()},user:function(){this.randomizeLoop()}},style:function(t){var e=t.className,i="".concat(this.avatarSize,"px");return[e("container",{display:"inline-flex",flexDirection:"row",alignItems:"center",overflow:"hidden",verticalAlign:"middle","&.multi-line":{flexDirection:"column","& > .name":{marginTop:"8px"}},"& > .name":{marginRight:"8px",flexGrow:1,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},"& > .avatar":{position:"relative",marginRight:this.showName?"8px":0,padding:"4px 0 0 0",width:i,height:i,overflow:"hidden"}})]}},d=Object(s.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[t.$style.container,t.multiLine&&"multi-line",!t.user||!t.user.type&&"unknown-mode"]},[i("div",{staticClass:"avatar"},[i("Avatar",{attrs:{name:t.playModeName||(t.user?t.user.name:""),size:t.avatarSize}})],1),t._v(" "),t.showName&&t.user?i("div",{staticClass:"name"},[t._v(" "+t._s(t.user.name)+" ")]):t._e(),t._v(" "),t._t("default")],2)}),[],!1,null,null,null).exports,h={style:function(t){return[(0,t.className)("cell",{display:"flex",flexDirection:"row",alignItems:"center",overflow:"hidden","& > .item":{},"& > .grow":{flexGrow:1}})]}},u=Object(s.a)(h,(function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.$style.cell},[this._t("default")],2)}),[],!1,null,null,null).exports,p={props:{chat:{type:Object}},components:{UserTitle:d,Cell:u},methods:{goToChat:function(t,e){this.$root.goToChat(t,e)}},style:function(t){return[(0,t.className)("chatItem",{display:"flex",flexDirection:"row",alignItems:"center",padding:"16px 8px",height:"56px",overflow:"hidden",cursor:"pointer","& > .icon":{margin:"0 8px"},"& > .state":{marginRight:"8px",width:"10px",height:"10px",borderRadius:"20px","&.online":{background:this.$root.theme.onlineColor},"&.offline":{backgroundColor:this.$root.theme.grayColor}},"& > .name":{marginRight:"8px",flexGrow:1,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},"& > .message":{flexGrow:1,opacity:.9,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"pre",textAlign:"right"}})]}},f=Object(s.a)(p,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Cell",{class:[t.$style.chatItem,t.chat&&t.chat.isActive?"actived":"deactived"]},[i("div",{},[i("UserTitle",{attrs:{sid:t.chat?t.chat.sid:void 0,pid:t.chat?t.chat.pd:void 0,avatarSize:40}})],1),t._v(" "),t.chat&&!t.chat.isActive?i("div",{staticClass:"message"},[t._v(t._s(t.chat&&t.chat.messages.length?t.chat.messages[t.chat.messages.length-1].message:""))]):t._e(),t._v(" "),i("div",{class:["state",t.chat&&t.chat.isOnline?"online":"offline"]}),t._v(" "),t._t("default")],2)}),[],!1,null,null,null).exports,m={props:{value:{validator:function(t){return[!0,!1,null].includes(t)},default:!1}},style:function(t){var e=t.className;t.mediaQuery;return[e("status",{display:"inline-block",width:"10px",height:"10px",borderRadius:"5px",fontSize:"12px",color:"#000","&.online":{background:this.$root.theme.onlineColor},"&.offline":{backgroundColor:this.$root.theme.grayColor},"&.loading":{backgroundColor:"transparent",color:"#000"}})]}},g=Object(s.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("span",{class:[this.$style.status,this.value?"online":"offline",null===this.value&&"loading"]},[null===this.value?e("i",{staticClass:"fa fa-spinner fa-pulse"}):this._e()])}),[],!1,null,null,null).exports;var v={components:{ChatListItem:f,UserTitle:d,Cell:u,StatusIcon:g},props:{activeChat:{type:Object}},data:function(){return{loadingRandomChat:!1}},computed:{chats:function(){return this.$chatService.chats}},methods:{connectToRandomUser:function(){var t=this;if(!this.loadingRandomChat){this.loadingRandomChat=!0;var e=function(e){t.loadingRandomChat=!1,t.goToChat(e)};setTimeout((function(){t.$chatService.connectToRandomUser().then(e).catch((function(i){"promise"===i?t.$chatService.$once("connetedToRandomUser",e):t.loadingRandomChat=!1}))}),500)}},isActive:function(t){return this.activeChat&&t.user.xid===this.activeChat.user.xid&&t.user.type===this.activeChat.user.type},goToChat:function(t){this.$emit("select",t)}},style:function(t){var e,i,o,a=t.className;t.mediaQuery;return[a("container",{height:"100%",overflow:"auto"}),a("chatList",{margin:0,padding:0}),a("chatItem",{borderBottom:"solid 1px ".concat(this.$root.theme.borderColor),cursor:"pointer","&.actived":{background:this.$root.theme.primaryColor,color:"#fff",fontWeight:"bold",cursor:"default"},"& .last-message":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"normal",fontStyle:"italic"}}),a("topButtons",{display:"block",padding:"16px 8px",height:"56px",width:"100%",overflow:"hidden",backgroundColor:"transparent",border:"none",borderBottom:"solid 1px ".concat(this.$root.theme.borderColor)}),a("copyButton",(e={display:"inline-block",padding:"0 16px",height:"32px",borderRadius:"32px",background:this.$root.theme.backgroundColor,cursor:"pointer",overflow:"hidden",border:"none"},i="border",o="solid 1px ".concat(this.$root.theme.borderColor),i in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e))]}},y=Object(s.a)(v,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$style.container},[i("div",{class:t.$style.chatList},[i("Cell",{staticClass:"padding-x-sm size-lg",class:[t.$style.chatItem],nativeOn:{click:function(e){return t.connectToRandomUser(e)}}},[i("div",{staticClass:"padding-x-sm"},[i("UserTitle",{attrs:{showName:!1,playMode:t.loadingRandomChat}})],1),t._v(" "),t.loadingRandomChat?i("div",{staticClass:"padding-x-sm grow"},[t._v(" Looking for a Random User... ")]):i("div",{staticClass:"padding-x-sm grow"},[t._v(" Talk to a Random User ")])]),t._v(" "),t._l(t.chats,(function(e,o){return i("Cell",{key:o,staticClass:"padding-x-sm size-lg",class:[t.$style.chatItem,t.isActive(e)&&"actived"],nativeOn:{click:function(i){return t.goToChat(e)}}},[i("div",{staticClass:"padding-x-sm grow"},[i("UserTitle",{attrs:{user:e.user}})],1),t._v(" "),i("div",{staticClass:"padding-x-sm last-message"},[t._v("\n        "+t._s(e.messages.length>0?e.messages[e.messages.length-1].body:"")+"\n      ")]),t._v(" "),i("div",{staticClass:"padding-x-sm"},[i("StatusIcon",{attrs:{value:e.isOnline}})],1)])}))],2)])}),[],!1,null,null,null).exports,b={props:{value:{type:String}},style:function(t){var e=t.className;t.mediaQuery;return[e("input",{borderRadius:"8px",border:"solid 2px ".concat(this.$root.theme.borderColor),padding:"8px",height:"48px",fontSize:"1em",display:"block",width:"100%","&[disabled]":{background:"#fff",cursor:"not-allowed"},"&:focus":{outline:"none",border:"solid 2px ".concat(this.$root.theme.primaryColor)}})]}},x=Object(s.a)(b,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{class:t.$style.input,domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})}),[],!1,null,null,null).exports,C={components:{Cell:u,Input:x,Button:r},props:{value:{type:String},disabled:{type:Boolean}},methods:{submit:function(){this.$refs.input.$el.focus(),this.$emit("submit",this.value)}},style:function(t){return[(0,t.className)("sendIcon",{color:this.$root.theme.primaryColor})]}},_=Object(s.a)(C,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[i("Cell",{staticClass:"padding-x-sm"},[i("div",{staticClass:"padding-x-sm grow"},[i("Input",{ref:"input",staticClass:"size-md",attrs:{placeholder:"Enter Your Message...",value:t.value,required:"",disabled:t.disabled},on:{input:function(e){return t.$emit("input",e)}}})],1),t._v(" "),i("div",{staticClass:"padding-x-sm"},[i("Button",{staticClass:"padding-x-lg size-md text-xl",attrs:{color:"default",disabled:t.disabled}},[i("i",{staticClass:"fa fa-paper-plane",class:t.$style.sendIcon})])],1)])],1)}),[],!1,null,null,null).exports,w=i(65),$=i.n(w),k={components:{Cell:u,Button:r,UserTitle:d,StatusIcon:g,MessageForm:_},props:{chat:{type:Object}},data:function(){return{inputText:"",lastIsTypingFlagSent:0,itIsTyping:!1,isTypingTimer:void 0}},computed:{messages:function(){return this.chat?this.chat.messages:[]},pendingMessages:function(){return this.chat?this.chat.pendingMessages:[]},its:function(){return this.chat?this.chat.user:void 0}},methods:{calcTextDir:function(t){return $()(t)},sendMessage:function(){if(this.chat){var t=this.inputText;this.inputText="",this.$chatService.sendMessage(this.chat,t).then()}},onInput:function(t){this.inputText=t,Date.now()>this.lastIsTypingFlagSent+1e3&&this.chat.isOnline&&(this.lastIsTypingFlagSent=Date.now(),this.$chatService.sendIsTypingFlag(this.chat))},closeChat:function(){this.$emit("close")},scrollToEnd:function(){this.$refs.conversation.scrollTo(0,this.$refs.conversation.scrollHeight)}},mounted:function(){var t=this;!function e(){t.chat?t.$chatService.refreshChat(t.chat).then((function(){setTimeout(e,5e3)})):setTimeout(e,5e3)}(),this.$chatService.$on("isTypingFlag",(function(e){t.chat&&t.chat.user.xid===e.xid&&t.chat.user.type===e.type&&(t.itIsTyping=!0,clearTimeout(t.isTypingTimer),t.isTypingTimer=setTimeout((function(){t.itIsTyping=!1}),5e3))}))},watch:{chat:function(){this.chat&&this.$chatService.refreshChat(this.chat),this.ItIsTyping=!1,clearTimeout(this.isTypingTimer)},"messages.length":function(){var t=this;this.itIsTyping=!1,this.$nextTick((function(){t.scrollToEnd()}))},"pendingMessages.length":function(){var t=this;this.$nextTick((function(){t.scrollToEnd()}))},itIsTyping:function(t){var e=this;t&&this.$nextTick((function(){e.scrollToEnd()}))}},style:function(t){var e=t.className;t.mediaQuery;return[e("container",{height:"100%",display:"flex",flexDirection:"column"}),e("header",{background:this.$root.theme.backgroundColor,borderBottom:"solid 1px ".concat(this.$root.theme.borderColor),display:"flex",flexDirection:"row",alignItems:"center",overflow:"hidden",flexShrink:0,"& > .name":{flexGrow:1},"& > .close-button":{width:"48px",height:"48px",border:"none",backgroundColor:"transparent",color:"inherit",cursor:"pointer"}}),e("conversation",{flexGrow:1,overflowY:"scroll",overflowX:"hidden",background:this.$root.theme.backgroundColor,overflowWrap:"break-word",lineHeight:1.5}),e("isTyping",{position:"sticky",bottom:0,backgroundColor:this.$root.theme.backgroundColor}),e("messageItem",{userSelect:"none",fontWeight:"bold",width:"100%","&.rtl":{direction:"rtl"},"& > .inside":{maxWidth:"70%",display:"inline-block",overflow:"hidden",userSelect:"text","&.pending":{opacity:.5}},"&.its":{textAlign:"left","& > .inside":{background:this.$root.theme.shadowColor,color:"#111",borderTopRightRadius:"24px",borderBottomRightRadius:"24px"}},"&.me":{textAlign:"right","& > .inside":{background:this.$root.theme.primaryColor,color:"#fff",borderTopLeftRadius:"24px",borderBottomLeftRadius:"24px"}}}),e("messageForm",{background:this.$root.theme.backgroundColor2,borderTop:"solid 1px ".concat(this.$root.theme.borderColor),flexShrink:0,"&.rtl input":{direction:"rtl"}})]}},T={components:{Button:r,UserTitle:d,Chats:y,Chat:Object(s.a)(k,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$style.container},[t.chat?i("Cell",{class:t.$style.header},[i("Cell",{staticClass:"padding-x-sm size-lg grow"},[i("div",{staticClass:"padding-x-sm"},[i("UserTitle",{attrs:{user:t.chat.user,avatarSize:65}})],1),t._v(" "),i("div",{staticClass:"padding-x-sm"},[i("StatusIcon",{attrs:{value:t.chat.isOnline}})],1)]),t._v(" "),i("Button",{staticClass:"size-lg padding-lg padding-x-xl",attrs:{color:"transparent"},nativeOn:{click:function(e){return t.closeChat(e)}}},[i("i",{staticClass:"fa fa-times"})])],1):t._e(),t._v(" "),i("div",{ref:"conversation",staticClass:"padding-top-lg",class:t.$style.conversation},[t._l(t.messages,(function(e,o){return i("div",{key:"m"+o,class:[t.$style.messageItem,e.from,t.calcTextDir(e.body)]},[i("div",{staticClass:"inside padding-lg margin-y-sm"},[t._v("\n        "+t._s(e.body)+"\n      ")])])})),t._v(" "),t._l(t.pendingMessages,(function(e,o){return i("div",{key:"p"+o,class:[t.$style.messageItem,e.from,t.calcTextDir(e.body)]},[i("div",{staticClass:"inside padding-lg margin-y-sm pending",attrs:{title:"This message will automaticly resend when both of you go online."}},[t._v("\n        "+t._s(e.body)+"\n      ")])])})),t._v(" "),i("div",{staticClass:"padding-sm",class:t.$style.isTyping},[t.itIsTyping?i("span",[t._v("\n        "+t._s(t.chat.user.name)+" is typing...\n      ")]):t._e()])],2),t._v(" "),i("MessageForm",{staticClass:"padding-x-md padding-y-lg",class:[t.$style.messageForm,t.calcTextDir(t.inputText)],attrs:{value:t.inputText,disabled:!t.chat},on:{submit:t.sendMessage,input:t.onInput}})],1)}),[],!1,null,null,null).exports},data:function(){return{copyToClipboardText:"Share My Direct Link"}},computed:{activeChat:function(){if(this.$route.params.type)return this.$chatService.getChat({type:this.$route.params.type,xid:this.$route.params.xid})}},methods:{goToChat:function(t,e){var i=this,o=t?"/chats/".concat(t,"/").concat(e):"/chats";this.$route.path!==o&&this.$nextTick((function(){i.$router.push(o)}))},copyLink:function(){var t=this;Object(a.copyToClipboard)("".concat(location.protocol,"//").concat(location.host,"/#/chats/").concat(this.$chatService.user.type,"/").concat(this.$chatService.user.xid));var e=this.copyToClipboardText;this.copyToClipboardText="Copied!",setTimeout((function(){t.copyToClipboardText=e}),750)},logout:function(){this.$root.$refs.authPopup.openLogout()}},created:function(){var t=this;this.$chatService.$on("newMessage",(function(e){var i=e.user,o=e.body,a=document.hasFocus();t.activeChat&&t.activeChat.user.type===i.type&&t.activeChat.user.xid===i.xid&&a||t.$notify(i.name,o,"message",!0,!a,(function(){window.focus(),t.goToChat(i.type,i.xid)}))}))},style:function(t){var e=t.className,i=t.mediaQuery;return[e("container",{height:"100%"}),e("app",{display:"flex",flexDirection:"row",height:"100%",overflow:"hidden",background:this.$root.theme.backgroundColor}),e("chats",{height:"100%",width:"340px",minWidth:"340px",backgroundColor:this.$root.theme.backgroundColor2,borderRight:"solid 1px ".concat(this.$root.theme.borderColor),boxShadow:"inset -4px 0 9px ".concat(this.$root.theme.shadowColor),"& > .profile":{textAlign:"center",borderBottom:"solid 1px ".concat(this.$root.theme.borderColor)}}),e("chat",{flexGrow:1,width:"100%",overflow:"hidden"}),i({maxWidth:"960px"},[e("chats",{display:"block",backgroundColor:this.$root.theme.backgroundColor,boxShadow:"none",width:"100%","&.hidden-on-mobile":{display:"none"}}),e("chat",{"&.hidden-on-mobile":{display:"none"}})])]}},S=Object(s.a)(T,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$style.container},[i("div",{class:t.$style.app},[i("div",{class:[t.$style.chats,t.activeChat&&"hidden-on-mobile"]},[i("div",{staticClass:"profile padding-bottom-xl padding-top-xl"},[i("div",{staticClass:"padding-bottom-lg"},[i("UserTitle",{attrs:{user:t.$chatService.user,multiLine:"",avatarSize:128}})],1),t._v(" "),i("div",[i("Button",{staticClass:"size-sm padding-left-lg padding-right-lg",attrs:{color:"default",disabled:"pid"!==t.$chatService.user.type,title:"Only Available for PID Users"},nativeOn:{click:function(e){return t.copyLink(e)}}},[i("b",[i("i",{staticClass:"fa fa-share"}),t._v("  "+t._s(t.copyToClipboardText)+" ")])]),t._v(" "),t.$chatService.user.type?i("Button",{staticClass:"size-sm padding-left-lg padding-right-lg",attrs:{color:"default"},nativeOn:{click:function(e){return t.logout(e)}}},[i("b",[i("i",{staticClass:"fa fa-sign-out-alt"}),t._v("  Exit ")])]):t._e()],1)]),t._v(" "),i("Chats",{attrs:{activeChat:t.activeChat},on:{select:function(e){return t.goToChat(e.user.type,e.user.xid)}}})],1),t._v(" "),i("Chat",{class:[t.$style.chat,!t.activeChat&&"hidden-on-mobile"],attrs:{chat:t.activeChat},on:{close:function(e){return t.goToChat(void 0,void 0)}}})],1)])}),[],!1,null,null,null).exports,E=[{path:"/",component:S},{path:"/chats",component:S},{path:"/chats/:type/:xid",component:S}],I=i(66);function z(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var M={components:{UserTitle:d,Input:x,Button:r,Cell:u},data:function(){return{currentPage:"none",loading:!1,visible:!1,form:{passprase:"",salt:"",remember:!1}}},methods:{open:function(){this.visible=!0;var t=localStorage.getItem("passprase"),e=localStorage.getItem("salt");e&&t?(this.form.passprase=t,this.form.salt=e,this.currentPage="none",this.auth("pid")):this.currentPage="choose"},openLogout:function(){this.visible=!0,this.currentPage="logout"},auth:function(t){var e=this;this.loading=!0;var i=function(i){e.$chatService.login(t,i).then((function(){"pid"===t&&e.form.remember&&(localStorage.setItem("passprase",e.form.passprase),localStorage.setItem("salt",e.form.salt)),e.visible=!1,e.loading=!1})).catch((function(){e.loading=!1,e.currentPage="cannot-connect"}))};"did"===t?new Promise((function(t,e){("requestIdleCallback"in window?window.requestIdleCallback:function(t){return setTimeout(t,500)})((function(){Object(I.getPromise)({excludes:{language:!0,userAgent:!0,enumerateDevices:!0}}).then((function(e){t(e)})).catch(e)}))})).then((function(t){t.time=Date.now(),i(t)})):"pid"===t&&i({passprase:this.form.passprase,salt:this.form.salt})},logout:function(){localStorage.removeItem("passprase"),localStorage.removeItem("salt"),this.$chatService.logout(),location.reload()}},style:function(t){var e,i=t.className;return[i("container",{position:"fixed",height:"100%",width:"100%",top:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.7)"}),i("box",{maxWidth:"420px",width:"100%",background:this.$root.theme.backgroundColor,borderRadius:"8px",border:"solid 1px ".concat(this.$root.theme.borderColor),boxShadow:"0 12px 12px ".concat(this.$root.theme.shadowColor)}),i("sessionError",{color:"#fff",textAlign:"center","& > h3":{textDecoration:"underline",cursor:"pointer"}}),i("button",(e={padding:"8px",borderRadius:"8px",border:"solid 1px ".concat(this.$root.theme.borderColor),background:this.$root.theme.backgroundColor,textAlign:"center"},z(e,"padding","16px"),z(e,"cursor","pointer"),z(e,"margin","16px"),z(e,"&.primary",{background:this.$root.theme.primaryColor,color:"#fff",border:"none"}),e))]}},B=Object(s.a)(M,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visible?i("div",{class:t.$style.container},["cannot-connect"===t.currentPage?i("div",{class:t.$style.sessionError},[t._m(0),t._v(" "),i("h3",{attrs:{role:"button"},on:{click:function(e){t.currentPage="choose"}}},[t._m(1)])]):"logout"===t.currentPage?i("div",{staticClass:"padding-lg",class:t.$style.box},[t._m(2),t._v(" "),t._m(3),t._v(" "),i("Cell",[i("div",{staticClass:"padding-right-md grow"},[i("Button",{staticClass:"size-md",attrs:{color:"default",fullWidth:""},nativeOn:{click:function(e){t.visible=!1}}},[i("b",[i("i",{staticClass:"fa fa-chevron-left"}),t._v(" No, Take Me Back ")])])],1),t._v(" "),i("div",[i("Button",{staticClass:"size-md padding-x-lg",attrs:{color:"danger",fullWidth:"",loading:t.loading},nativeOn:{click:function(e){return t.logout()}}},[i("b",[i("i",{staticClass:"fa fa-sign-out-alt"}),t._v(" Yes I'm sure ")])])],1)])],1):"choose"===t.currentPage?i("div",{staticClass:"padding-lg",class:t.$style.box},[i("div",{staticClass:"padding-bottom-lg"},[i("Button",{staticClass:"size-xxl padding-xl",attrs:{color:"primary",fullWidth:""},nativeOn:{click:function(e){t.currentPage="pidLogin"}}},[i("div",{staticClass:"padding-bottom-md text-xl"},[i("b",[i("i",{staticClass:"fa fa-key"}),t._v("  Enter by Passprase ")])]),t._v(" "),i("p",[t._v(" Get Your Unique Direct Link ")])])],1),t._v(" "),i("div",[i("Button",{staticClass:"size-xxl padding-lg",attrs:{color:"default",fullWidth:"",loading:t.loading},nativeOn:{click:function(e){return t.auth("did")}}},[i("div",{staticClass:"padding-bottom-md text-xl"},[i("b",[i("i",{staticClass:"fa fa-user-secret"}),t._v(" Skip ")])]),t._v(" "),i("p",[t._v(" Enter Anonymously ")])])],1)]):"pidLogin"===t.currentPage?i("div",{staticClass:"padding-lg",class:t.$style.box},[i("div",{staticClass:"padding-bottom-xl"},[i("a",{attrs:{role:"button"},on:{click:function(e){t.currentPage="choose"}}},[t._m(4)])]),t._v(" "),t._m(5),t._v(" "),i("form",{on:{submit:function(e){return e.preventDefault(),t.auth("pid")}}},[i("div",{staticClass:"padding-bottom-lg"},[t._m(6),t._v(" "),i("div",{staticClass:"padding-bottom-md"},[i("Input",{attrs:{placeholder:"Enter your Passprase.",required:"",disabled:t.loading},model:{value:t.form.passprase,callback:function(e){t.$set(t.form,"passprase",e)},expression:"form.passprase"}})],1),t._v(" "),t._m(7)]),t._v(" "),i("div",{staticClass:"padding-bottom-xl"},[t._m(8),t._v(" "),i("div",{staticClass:"padding-bottom-md"},[i("Input",{attrs:{placeholder:"Enter your Email or Phone for example.",required:"",disabled:t.loading},model:{value:t.form.salt,callback:function(e){t.$set(t.form,"salt",e)},expression:"form.salt"}})],1),t._v(" "),t._m(9)]),t._v(" "),i("div",{staticClass:"padding-bottom-lg"},[i("div",[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.remember,expression:"form.remember"}],attrs:{type:"checkbox",disabled:t.loading},domProps:{checked:Array.isArray(t.form.remember)?t._i(t.form.remember,null)>-1:t.form.remember},on:{change:function(e){var i=t.form.remember,o=e.target,a=!!o.checked;if(Array.isArray(i)){var n=t._i(i,null);o.checked?n<0&&t.$set(t.form,"remember",i.concat([null])):n>-1&&t.$set(t.form,"remember",i.slice(0,n).concat(i.slice(n+1)))}else t.$set(t.form,"remember",a)}}}),t._v(" Remember These ")])])]),t._v(" "),i("div",[i("Button",{staticClass:"size-md",attrs:{color:"primary",fullWidth:"",disabled:t.loading,loading:t.loading}},[i("b",[i("i",{staticClass:"fa fa-check"}),t._v("  Generate a PID and Enter ")])])],1)])]):t._e()]):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"padding-bottom-lg"},[e("i",{staticClass:"fa fa-info-circle"},[this._v(" Close the Other Sessions First. ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("b",[e("i",{staticClass:"fa fa-chevron-right"}),this._v(" Or Let Me Try with Another Credentials ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"padding-bottom-lg"},[e("h3",[this._v(" Logout. ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"padding-bottom-xl"},[e("p",[this._v(" Are you sure you want to exit from app? By doing this all of your chats data, saved credentials, and pending messages will be lost. ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("b",[e("i",{staticClass:"fa fa-chevron-left"}),this._v("  Back ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"padding-bottom-xl"},[e("p",[this._v(" Keep in mind that this is not a normal login with Username and Password! This is something likes bitcoin wallet and you have to keep entered text somewhere safe to access this account later. ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"padding-bottom-md"},[e("b",[e("i",{staticClass:"fa fa-fingerprint"}),this._v(" Passprase ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("small",[e("i",{staticClass:"fa fa-info-circle"}),this._v(" Choose a big and unique string as Passprase will helps you to keep your generated PID safe. ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"padding-bottom-md"},[e("b",[e("i",{staticClass:"fa fa-key"}),this._v(" Salt ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("small",[e("i",{staticClass:"fa fa-info-circle"}),this._v(" To generate a unguessable PID, It's better that appending a Salt to it. So why not? ")])])}],!1,null,null,null).exports,O={components:{UserTitle:d},style:function(t){return[(0,t.className)("container",{position:"fixed",height:"100%",width:"100%",top:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.7)",color:"#fff"})]}},P=Object(s.a)(O,(function(){var t=this.$createElement,e=this._self._c||t;return!1===this.$connection.status?e("div",{class:this.$style.container},[e("div",[e("div",{staticClass:"padding-bottom-lg"},[e("UserTitle",{attrs:{showName:!1,playMode:"",avatarSize:256}})],1),this._v(" "),e("h2",[this._v(" Waiting for Network... ")])])]):this._e()}),[],!1,null,null,null).exports;function R(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var A={router:new o.default({routes:E}),components:{AuthPopup:B,AutoNetworkError:P},data:function(){return{theme:{fillColor:"#333",backgroundColor:"#fff",backgroundColor2:"#f1f1f1",backgroundColor3:"#f2f2f2",highlightColor:"#fdfdfd",borderColor:"rgba(0, 0, 0, 0.1)",shadowColor:"rgba(0, 0, 0, 0.1)",primaryColor:"#7949BF",dangerColor:"#bd161e",grayColor:"#c7c7c7",onlineColor:"#08c353"}}},methods:{openAuthPopup:function(){var t=this;this.$nextTick((function(){t.$refs.authPopup.open()}))}},created:function(){this.$chatService.init("https://viska.herokuapp.com")},mounted:function(){this.openAuthPopup()},style:function(t){var e=t.custom,i=t.className,o=[],a=[.5,1,2,3];["margin","padding"].forEach((function(t){["sm","md","lg","xl"].forEach((function(i,n){var s="".concat(8*a[n],"px");["","-left","-right","-top","-bottom","-x","-y"].forEach((function(a){var n,r=".".concat(t).concat(a,"-").concat(i);if("-x"===a)o.push(e(r,(R(n={},"".concat(t,"-left"),s),R(n,"".concat(t,"-right"),s),n)));else if("-y"===a){var l;o.push(e(r,(R(l={},"".concat(t,"-top"),s),R(l,"".concat(t,"-bottom"),s),l)))}else o.push(e(r,R({},"".concat(t).concat(a),s)))}))}))}));var n=[4,5,6,7,8,9];["xs","sm","md","lg","xl","xxl"].forEach((function(t,i){o.push(e(".size-".concat(t),{minHeight:"".concat(8*n[i],"px")}))}));var s=[.8,.9,1,1.15,1.3,1.6];["xs","sm","md","lg","xl","xxl"].forEach((function(t,i){o.push(e(".text-".concat(t),{fontSize:"".concat(s[i],"rem")}))}));var r={height:"100%",maxHeight:"100%",minHeight:"100%",background:this.theme.shadeColor,color:this.theme.fillColor,fontSize:"15px"};return[e("@font-face",{fontFamily:"'Poppins'",fontStyle:"normal",fontWeight:"normal",src:"local('Poppins SemiBold'), local('Poppins-SemiBold'),\n              url('/fonts/poppins-v9-latin-regular.woff2') format('woff2'),\n              url('/fonts/poppins-v9-latin-regular.woff') format('woff'),\n              url('/fonts/poppins-v9-latin-regular.ttf') format('truetype')"}),e("@font-face",{fontFamily:"'Poppins'",fontStyle:"normal",fontWeight:"bold",src:"local('Poppins SemiBold'), local('Poppins-SemiBold'),\n              url('/fonts/poppins-v9-latin-600.woff2') format('woff2'),\n              url('/fonts/poppins-v9-latin-600.woff') format('woff'),\n              url('/fonts/poppins-v9-latin-600.ttf') format('truetype')"}),e("*",{padding:0,margin:0,touchAction:"pan-y",boxSizing:"border-box",userSelect:"none","-webkit-overflow-scrolling":"touch","-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)",fontFamily:"'Poppins', sans-serif"}),e("html, body, #root",r),i("container",r)].concat(o)}},N=Object(s.a)(A,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:this.$style.container},[e("router-view"),this._v(" "),e("AuthPopup",{ref:"authPopup"}),this._v(" "),e("AutoNetworkError")],1)}),[],!1,null,null,null);e.default=N.exports}}]);